‚Äç<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PHURAI CHAT PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100dvh; overflow: hidden; }
        .header { padding: 15px; border-bottom: 1px solid #222; display: flex; align-items: center; justify-content: space-between; }
        .chat-area { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .user-list { padding: 10px; border-bottom: 1px solid #222; max-height: 150px; overflow-y: auto; background: #111; display: none; }
        .u-item { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 13px; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: #444; }
        .online { background: #22c55e !important; }
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 20px; font-size: 14px; position: relative; }
        .sent { background: #0084ff; align-self: flex-end; }
        .recv { background: #333; align-self: flex-start; }
        .footer { padding: 10px; background: #000; border-top: 1px solid #222; display: flex; align-items: center; gap: 10px; }
        .icon-btn { color: #0084ff; font-size: 20px; cursor: pointer; }
        .in-box { flex: 1; background: #242526; border-radius: 20px; padding: 5px 15px; display: flex; align-items: center; }
        input { background: transparent; border: none; outline: none; color: #fff; flex: 1; height: 30px; }
        #login { position: fixed; inset: 0; background: #000; z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
    </style>
</head>
<body>

<div id="login">
    <h1 class="text-3xl font-bold text-blue-500 mb-6">PHURAI MAX</h1>
    <input id="uPh" type="tel" placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞" class="w-full max-w-xs bg-[#111] p-4 rounded-xl mb-3 border border-gray-800 text-center">
    <input id="uNm" type="text" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" class="w-full max-w-xs bg-[#111] p-4 rounded-xl mb-6 border border-gray-800 text-center">
    <button onclick="reg()" class="w-full max-w-xs bg-blue-600 p-4 rounded-xl font-bold">‡¶Ü‡¶á‡¶°‡¶ø ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</button>
</div>

<div class="header">
    <div class="flex items-center gap-2">
        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center font-bold">P</div>
        <div><h2 class="text-sm font-bold">PHURAI CHAT</h2><p class="text-[9px] text-green-500">ACTIVE NOW</p></div>
    </div>
    <div class="flex gap-2">
        <button onclick="toggleList()" class="bg-gray-800 px-3 py-1 rounded-full text-[10px]">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</button>
        <button onclick="share()" class="bg-blue-600 px-3 py-1 rounded-full text-[10px]">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶ï‡ßá ‡¶¶‡¶ø‡¶®</button>
    </div>
</div>

<div id="uList" class="user-list"></div>
<div id="cBox" class="chat-area"></div>

<div class="footer">
    <span class="icon-btn">‚ûï</span>
    <span class="icon-btn">üì∑</span>
    <span class="icon-btn">üñºÔ∏è</span>
    <span class="icon-btn">üéôÔ∏è</span>
    <div class="in-box"><input id="mIn" type="text" placeholder="‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></div>
    <button onclick="sendMsg('‚û§')" class="text-blue-500 text-xl font-bold">‚û§</button>
    <button onclick="sendMsg('üëç')" class="text-2xl">üëç</button>
</div>

<script>
    const conf = { apiKey: "AIzaSyAo-AtxN0eLgtN-HznpTq2c", authDomain: "phurai-3a289.firebaseapp.com", projectId: "phurai-3a289", storageBucket: "phurai-3a289.appspot.com", messagingSenderId: "841766177401", appId: "1:841766177401:web:8f41f0ddf9" };
    firebase.initializeApp(conf); const db = firebase.firestore();
    let name = localStorage.getItem("n"), phone = localStorage.getItem("p");

    if(name && phone) { document.getElementById('login').style.display='none'; start(); }

    function reg() {
        const ph = document.getElementById('uPh').value; const nm = document.getElementById('uNm').value;
        if(ph && nm) { localStorage.setItem("p", ph); localStorage.setItem("n", nm); 
        db.collection("users").doc(ph).set({name: nm, phone: ph, lastSeen: Date.now()}); location.reload(); }
    }

    function start() {
        setInterval(() => db.collection("users").doc(phone).update({lastSeen: Date.now()}), 10000);
        loadUsers(); loadMsgs();
    }

    function loadUsers() {
        db.collection("users").onSnapshot(s => {
            const list = document.getElementById('uList'); list.innerHTML = "";
            s.forEach(d => {
                const u = d.data(); const isOnline = (Date.now() - u.lastSeen) < 30000;
                list.innerHTML += `<div class="u-item"><div class="dot ${isOnline?'online':''}"></div>
                <div class="w-6 h-6 bg-blue-900 rounded-full flex items-center justify-center text-[10px]">P</div>
                ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ${u.phone} ${u.name} ${isOnline?'<span class="text-green-500 text-[10px]">‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶Ü‡¶õ‡ßá</span>':''}</div>`;
            });
        });
    }

    function toggleList() { const l = document.getElementById('uList'); l.style.display = l.style.display==='block'?'none':'block'; }

    function sendMsg(t) {
        const i = document.getElementById('mIn'); const val = t === '‚û§' ? i.value : t;
        if(val) { db.collection("chats").add({ n: name, p: phone, m: val, t: Date.now() }); i.value=""; }
    }

    function loadMsgs() {
        db.collection("chats").orderBy("t", "asc").onSnapshot(s => {
            const b = document.getElementById('cBox'); b.innerHTML = "";
            s.forEach(d => {
                const m = d.data(); const isMe = m.p === phone;
                b.innerHTML += `<div class="flex flex-col ${isMe?'items-end':'items-start'}">
                <span class="text-[9px] text-gray-500 mb-1">${m.n}</span>
                <div class="msg ${isMe?'sent':'recv'}">${m.m}</div></div>`;
            });
            b.scrollTop = b.scrollHeight;
        });
    }
    function share() { navigator.clipboard.writeText(window.location.href); alert("‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); }
</script>
</body>
        </html>
