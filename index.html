
<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phurai Pro - Profile Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        :root { --bg: #0f0f12; --panel: #1e1e21; --primary: #0084ff; --text: #ffffff; }
        .purple-theme { --bg: #1a0b2e; --panel: #2d134d; --primary: #d946ef; --text: #ffffff; }
        .light-theme { --bg: #f0f2f5; --panel: #ffffff; --primary: #0084ff; --text: #000000; }

        body { background: var(--bg); color: var(--text); font-family: sans-serif; transition: 0.3s; overflow: hidden; }
        .chat-container { height: calc(100vh - 200px); overflow-y: auto; padding: 15px; display: flex; flex-direction: column; }
        
        /* ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶õ‡¶¨‡¶ø ‡¶¨‡¶æ ‡¶Ö‡¶¨‡¶§‡¶æ‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .avatar { width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; flex-shrink: 0; }
        .msg-wrapper { display: flex; gap: 10px; margin-bottom: 15px; align-items: flex-end; }
        .msg { max-width: 75%; padding: 12px 16px; border-radius: 20px; font-size: 16px; position: relative; }
        
        .sent-wrapper { flex-direction: row-reverse; }
        .sent { background: var(--primary); color: white; border-bottom-right-radius: 4px; }
        .received { background: var(--panel); border-bottom-left-radius: 4px; border: 1px solid #444; }
        
        .sender-name { font-size: 11px; font-weight: bold; margin-bottom: 2px; display: block; color: #fbbf24; }
        .time { font-size: 9px; opacity: 0.6; margin-top: 4px; display: block; }

        .bottom-area { position: fixed; bottom: 30px; left: 0; right: 0; background: var(--bg); padding: 10px 15px; border-top: 1px solid #333; }
        .input-wrapper { display: flex; align-items: center; gap: 10px; background: var(--panel); border-radius: 30px; padding: 5px 5px 5px 20px; border: 1px solid #444; }
        .msg-input { flex: 1; background: transparent; border: none; outline: none; color: var(--text); padding: 10px 0; }
        .send-btn { background: var(--primary); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0, 132, 255, 0.3); }
    </style>
</head>
<body id="mainBody">

    <div class="bg-zinc-900 p-4 flex justify-between items-center shadow-md sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <button onclick="changeTheme()" class="text-xl">üé®</button>
            <div>
                <h1 id="appTitle" class="text-xl font-bold text-blue-500">PHURAI PRO</h1>
                <p class="text-[10px] text-green-500">‚óè Online</p>
            </div>
        </div>
        <div class="flex gap-4 text-xl">
            <button onclick="alert('‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡¶≤ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá!')">üìπ</button>
            <button onclick="alert('‡¶Ö‡¶°‡¶ø‡¶ì ‡¶ï‡¶≤ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá!')">üìû</button>
        </div>
    </div>

    <div id="chat-box" class="chat-container"></div>

    <div class="bottom-area">
        <div class="flex gap-6 mb-2 px-2 text-2xl">
            <span>üñºÔ∏è</span> <span>üìç</span>
        </div>
        <div class="input-wrapper">
            <input id="msgInput" type="text" placeholder="‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." class="msg-input">
            <button onclick="sendMsg()" class="send-btn">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
            </button>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAo-AtxN0eLgtN-HznpTq2c",
            authDomain: "phurai-3a289.firebaseapp.com",
            projectId: "phurai-3a289",
            storageBucket: "phurai-3a289.appspot.com",
            messagingSenderId: "841766177401",
            appId: "1:841766177401:web:8f41f0ddf9"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let user = localStorage.getItem("chatName") || prompt("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ:");
        if(!user) user = "User";
        localStorage.setItem("chatName", user);

        // ‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶¶‡¶ø‡ßü‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶õ‡¶¨‡¶ø ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function getAvatar(name) {
            const colors = ['#f87171', '#fb923c', '#fbbf24', '#4ade80', '#22d3ee', '#818cf8', '#c084fc'];
            const firstChar = name.charAt(0).toUpperCase();
            const color = colors[name.length % colors.length];
            return `<div class="avatar" style="background: ${color}">${firstChar}</div>`;
        }

        let currentTheme = 0;
        function changeTheme() {
            const body = document.getElementById('mainBody');
            currentTheme = (currentTheme + 1) % 3;
            body.className = currentTheme === 1 ? 'purple-theme' : (currentTheme === 2 ? 'light-theme' : '');
        }

        function sendMsg() {
            const input = document.getElementById('msgInput');
            if(!input.value.trim()) return;
            db.collection("messages").add({
                name: user,
                text: input.value,
                time: firebase.firestore.FieldValue.serverTimestamp()
            });
            input.value = "";
        }

        db.collection("messages").orderBy("time", "asc").onSnapshot(snap => {
            const box = document.getElementById('chat-box');
            box.innerHTML = "";
            snap.forEach(doc => {
                const d = doc.data();
                const isMe = d.name === user;
                const t = d.time ? new Date(d.time.toDate()).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}) : '...';
                
                box.innerHTML += `
                    <div class="msg-wrapper ${isMe ? 'sent-wrapper' : ''}">
                        ${getAvatar(d.name)}
                        <div class="msg ${isMe ? 'sent' : 'received'} shadow-md">
                            <span class="sender-name">${isMe ? '‡¶Ü‡¶™‡¶®‡¶ø' : d.name}</span>
                            ${d.text}
                            <span class="time">${t}</span>
                        </div>
                    </div>`;
            });
            box.scrollTop = box.scrollHeight;
        });

        document.getElementById('msgInput').addEventListener('keypress', e => { if(e.key==='Enter') sendMsg(); });
    </script>
</body>
</html>
